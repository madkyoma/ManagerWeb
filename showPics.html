<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta content="" name="description" />
    <title>管理员端-我发布的图片</title>
    <!-- Bootstrap Styles-->
    <link href="assets/css/bootstrap.css" rel="stylesheet" />
    <!-- FontAwesome Styles-->
    <link href="assets/css/font-awesome.css" rel="stylesheet" />

    <link href="assets/css/select2.min.css" rel="stylesheet" >
    <link href="assets/css/checkbox3.min.css" rel="stylesheet" >
    <!-- Custom Styles-->
    <link href="assets/css/custom-styles.css" rel="stylesheet" />
    <!-- Google Fonts-->
    <link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css' />
    <link rel="stylesheet" href="assets/js/Lightweight-Chart/cssCharts.css"> 

</head>
<body>
    <div id="wrapper">
        <nav class="navbar navbar-default top-navbar" role="navigation">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".sidebar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="index.html"><strong><i class="icon fa fa-plane"></i> LabelTank</strong></a>
                <div id="sideNav" href="">
        <i class="fa fa-bars icon"></i> 
        </div>
            </div>

            
            <ul class="nav navbar-top-links navbar-right" style="float:right;">
                
                <!-- /.dropdown -->
                <li class="dropdown">
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#" aria-expanded="false" style="color:#F30">
                        <i class="fa fa-user fa-fw"></i> 
                        <i class="fa fa-caret-down"></i>
                    </a>
                    <ul class="dropdown-menu dropdown-user">
                        <li><a href="information.html"><i class="fa fa-user fa-fw"></i> 信息修改</a>
                        </li>
                        <li><a href="#"><i class="fa fa-gear fa-fw"></i> 设置</a>
                        </li>
                        <li class="divider"></li>
                        <li><a href="login.html"><i class="fa fa-sign-out fa-fw"></i> 注销</a>
                        </li>
                    </ul>
                    <!-- /.dropdown-user -->
                </li>
                <!-- /.dropdown -->
            </ul>

            <div method="get" id="searchdiv" style="float:right; margin-top:13px;">
                <input style="float:left;width:70%;" class="form-control" type="text" name="s" id="s" placeholder="搜索">
                <button style="float:left;margin-left:10px;" class="btn" title="搜索" type="button" id="search">搜索</button>
            </div>
        </nav>
        <!--/. NAV TOP  -->
        <nav class="navbar-default navbar-side" role="navigation">
            <div class="sidebar-collapse">
                <ul class="nav" id="main-menu">

                    <li>
                        <a class="active-menu" href="index.html"><i class="fa fa-dashboard"></i> 我发布的图片</a>
                    </li>
                    <li>
                        <a href="create-picSet.html"><i class="fa fa-edit"></i> 发布新的图片</a>
                    </li> 
                    
                    
                    <li>
                        <a href="export.html"><i class="fa fa-table"></i> 标签结果导出</a>
                    </li>
                    <li>
                        <a href="information.html"><i class="fa fa-user"></i> 个人信息修改 </a>
                    </li>
                           
                </ul>

            </div>

        </nav>
        <!-- /. NAV SIDE  -->
        <div id="page-wrapper">
          <div class="header"> 
                        <h1 class="page-header" id="album_name">
                            <small>Welcome 管理员</small>
                        </h1>
                        <ol class="breadcrumb">
                            <li><a href="index.html" id="newPicSet">返回图片集目录 </a></li>
                    </ol> 
                                    
        </div>
            <div id="page-inner"> 
            <!-- 第一行ROW -->
            <div class="row">
                <div class="col-md-3 col-sm-12 picture" id="div1" name="picDiv" style="display:none">
                    <div class="panel panel-warning" data-toggle="modal" data-target=".bs-newchapter-modal-lg" style="cursor:pointer">
                        <div class="panel-body" align="center" style="overflow:hidden;">
                            <img  name="pic" id="pic1" height="100%" src="assets/img/album_default_picture.png">
                        </div>
                        <div class="panel-heading">
                            <p name="label" id="label1" style="width: 100%; margin: 0; padding: 0; white-space: nowrap; overflow: hidden; text-overflow: ellipsis">Panel Footer</p>
                        </div>
                    </div>
                </div>

                <div class="col-md-3 col-sm-12 picture" id="div2" name="picDiv" style="display:none">
                    <div class="panel panel-warning" data-toggle="modal" data-target=".bs-newchapter-modal-lg" style="cursor:pointer">
                        <div class="panel-body" align="center" style="overflow:hidden;">
                            <img name="pic" id="pic2" height="100%" src="assets/img/album_default_picture.png">
                        </div>
                        <div class="panel-heading">
                            <p name="label" id="label2" style="width: 100%; margin: 0; padding: 0; white-space: nowrap; overflow: hidden; text-overflow: ellipsis">Panel Footer</p>
                        </div>
                    </div>
                </div>

                <div class="col-md-3 col-sm-12 picture" id="div3" name="picDiv" style="display:none">
                    <div class="panel panel-warning" data-toggle="modal" data-target=".bs-newchapter-modal-lg" style="cursor:pointer">
                        <div class="panel-body" align="center" style="overflow:hidden;">
                            <img name="pic" id="pic3" height="100%" src="assets/img/album_default_picture.png">
                        </div>
                        <div class="panel-heading">
                            <p name="label" id="label3" style="width: 100%; margin: 0; padding: 0; white-space: nowrap; overflow: hidden; text-overflow: ellipsis">Panel Footer</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3 col-sm-12 picture" id="div4" name="picDiv" style="display:none">
                    <div class="panel panel-warning" data-toggle="modal" data-target=".bs-newchapter-modal-lg" style="cursor:pointer">
                        <div class="panel-body" align="center" style="overflow:hidden;">
                            <img name="pic" id="pic4" height="100%" src="assets/img/album_default_picture.png">
                        </div>
                        <div class="panel-heading">
                            <p name="label" id="label4" style="width: 100%; margin: 0; padding: 0; white-space: nowrap; overflow: hidden; text-overflow: ellipsis">Panel Footer</p>
                        </div>
                    </div>
                </div>
                
            </div>
                   <!-- /. 第二行ROW  -->
            <div class="row">
                <div class="col-md-3 col-sm-12 picture" id="div5" name="picDiv" style="display:none">
                    <div class="panel panel-warning" data-toggle="modal" data-target=".bs-newchapter-modal-lg" style="cursor:pointer">
                        <div class="panel-body" align="center" style="overflow:hidden;">
                            <img name="pic" id="pic5" height="100%" src="assets/img/album_default_picture.png">
                        </div>
                        <div class="panel-heading">
                            <p name="label" id="label5" style="width: 100%; margin: 0; padding: 0; white-space: nowrap; overflow: hidden; text-overflow: ellipsis">Panel Footer</p>
                        </div>
                    </div>
                </div>

                <div class="col-md-3 col-sm-12 picture" id="div6" name="picDiv" style="display:none">
                    <div class="panel panel-warning" data-toggle="modal" data-target=".bs-newchapter-modal-lg" style="cursor:pointer">
                        <div class="panel-body" align="center" style="overflow:hidden;">
                            <img name="pic" id="pic6" height="100%" src="assets/img/album_default_picture.png">
                        </div>
                        <div class="panel-heading">
                            <p name="label" id="label6" style="width: 100%; margin: 0; padding: 0; white-space: nowrap; overflow: hidden; text-overflow: ellipsis">Panel Footer</p>
                        </div>
                    </div>
                </div>

                <div class="col-md-3 col-sm-12 picture" id="div7" name="picDiv" style="display:none">
                    <div class="panel panel-warning" data-toggle="modal" data-target=".bs-newchapter-modal-lg" style="cursor:pointer">
                        <div class="panel-body" align="center" style="overflow:hidden;">
                            <img name="pic" id="pic7" height="100%" src="assets/img/album_default_picture.png">
                        </div>
                        <div class="panel-heading">
                            <p name="label" id="label7" style="width: 100%; margin: 0; padding: 0; white-space: nowrap; overflow: hidden; text-overflow: ellipsis">Panel Footer</p>
                        </div>
                    </div>
                </div>

                <div class="col-md-3 col-sm-12 picture" id="div8" name="picDiv" style="display:none">
                    <div class="panel panel-warning" data-toggle="modal" data-target=".bs-newchapter-modal-lg" style="cursor:pointer">
                        <div class="panel-body" align="center" style="overflow:hidden;">
                            <img name="pic" id="pic8" height="100%" src="assets/img/album_default_picture.png">
                        </div>
                        <div class="panel-heading">
                            <p name="label" id="label8" style="width: 100%; margin: 0; padding: 0; white-space: nowrap; overflow: hidden; text-overflow: ellipsis">Panel Footer</p>
                        </div>
                    </div>
                </div>

            </div>   
                   <!-- /. 第三行ROW  -->
            <div class="row">
                <div class="col-md-3 col-sm-12 picture" id="div9" name="picDiv" style="display:none">
                    <div class="panel panel-warning" data-toggle="modal" data-target=".bs-newchapter-modal-lg" style="cursor:pointer">
                        <div class="panel-body" align="center" style="overflow:hidden;">
                            <img name="pic" id="pic9" height="100%" src="assets/img/album_default_picture.png">
                        </div>
                        <div class="panel-heading">
                            <p name="label" id="label9" style="width: 100%; margin: 0; padding: 0; white-space: nowrap; overflow: hidden; text-overflow: ellipsis">Panel Footer</p>
                        </div>
                    </div>
                </div>

                <div class="col-md-3 col-sm-12 picture" id="div10" name="picDiv" style="display:none">
                    <div class="panel panel-warning" data-toggle="modal" data-target=".bs-newchapter-modal-lg" style="cursor:pointer">
                        <div class="panel-body" align="center" style="overflow:hidden;">
                            <img name="pic" id="pic10" height="100%" src="assets/img/album_default_picture.png">
                        </div>
                        <div class="panel-heading">
                            <p name="label" id="label10" style="width: 100%; margin:0;padding:0; white-space: nowrap; overflow: hidden; text-overflow: ellipsis">Panel Footer</p>
                        </div>
                    </div>
                </div>

                <div class="col-md-3 col-sm-12 picture" id="div11" name="picDiv" style="display:none">
                    <div class="panel panel-warning" data-toggle="modal" data-target=".bs-newchapter-modal-lg" style="cursor:pointer">
                        <div class="panel-body" align="center" style="overflow:hidden;">
                            <img name="pic" id="pic11" height="100%" src="assets/img/album_default_picture.png">
                        </div>
                        <div class="panel-heading">
                            <p name="label" id="label11" style="width: 100%; margin:0;padding:0; white-space: nowrap; overflow: hidden; text-overflow: ellipsis">Panel Footer</p>
                        </div>
                    </div>
                </div>

                <div class="col-md-3 col-sm-12 picture" id="div12" name="picDiv" style="display:none">
                    <div class="panel panel-warning" data-toggle="modal" data-target=".bs-newchapter-modal-lg" style="cursor:pointer">
                        <div class="panel-body" align="center" style="overflow:hidden;">
                            <img name="pic" id="pic12" height="100%" src="assets/img/album_default_picture.png">
                        </div>
                        <div class="panel-heading">
                            <p name="label" id="label12" style="width: 100%; margin:0;padding:0; white-space: nowrap; overflow: hidden; text-overflow: ellipsis">Panel Footer</p>
                        </div>
                    </div>
                </div>
            </div>                    
                
                <footer><p>Copyright &copy; 2017. No3b All rights reserved.<a target="_blank" href="#">联系我们</a></p></footer>
                </div>
             <!-- /. PAGE INNER  -->
            </div>
         <!-- /. PAGE WRAPPER  -->
        </div>
     <!-- /. WRAPPER  -->

     <!-- 模态框 -->
      <div class="modal fade bs-newchapter-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel">
        <div class="modal-dialog modal-sm" role="document" style="width:500px;">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">×</span>
              </button>
              <h4 class="modal-title" id="myLargeModalLabel">图片详情</h4>
            </div>
            <div class="modal-body" style="height:450px;" align="center">
                <img id="chosedPic" height="60%" src="assets/img/album_default_picture.png">
                <p id="desTags" style="text-align: left; margin: 0 30px;">描述标签：</p>
                <p id="req" style="text-align: left; margin: 0 30px;">管理员提问：</p>
                <p id="reqTags" style="text-align: left; margin: 0 30px;">需求标签：</p>
            </div>
          </div>
        </div>
      </div>

    <!-- JS Scripts-->
    <!-- jQuery Js -->
    <script src="assets/js/jquery-1.10.2.js"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            $('#search').on('click',function(){
                var keyword = $('#s').val();
                window.location.href = "searchRes.html?keyword=" + keyword;
            });
            document.getElementById("album_name").innerHTML=getparam2()+"<small>Welcome 管理员</small>";
            showPics();
            $(".panel-warning").on('click',function(){
                $('#chosedPic').attr('src',$(this).attr('url'));
                $('#desTags').html('描述标签：' + $(this).attr('desOptionalTags'));
                $('#req').html('管理员提问：' + $(this).attr('req'));
                $('#reqTags').html('需求标签：' + $(this).attr('reqOptionalTags'));
            });

        });
        function getparam1(){
            var url=location.href;
            url = decodeURI( url );
            var tmp1=url.split("?")[1];
            var tmp2=tmp1.split("&")[0];
            var tmp3=tmp2.split("=")[1];
            var param1=tmp3;
            return param1;
        } 
        function getparam2(){
            var url=location.href;
            url = decodeURI( url );
            var tmp1=url.split("?")[1];
            var tmp2=tmp1.split("&")[1];
            var tmp3=tmp2.split("=")[1];
            var param2=tmp3;
            return param2;
        } 
        function showPics(){
            var params = "picSetId="+getparam1();  
            var url = "http://114.115.142.42/Operation/GetPhotos";  
            $.ajax({  
                type: 'POST',  
                url: url,  
                dataType: 'text',  
                data: params,  
                beforeSend: function(){  
                },  
                complete: function(XMLHttpRequest, textStatus) { 
                },  
                success: function(data) { 
                    if(data=="invalid!"){  
                        window.alert("未登录！非法操作！");
                    }else{

                        console.log(data);
                        //获取页面中的元素
                        var divArr=document.getElementsByName("picDiv");
                        var picArr=document.getElementsByName("pic");
                        var labelArr=document.getElementsByName("label");
                      
                        var myobj=eval('('+data+')');
                        console.log(myobj);
                        //window.alert(data);
                        for(var i=0;i<myobj.length;i++){
                            //显示图片div
                            divArr[i].style.display="block";
                            //更改图片地址
                            if(myobj[i].url!=null&&myobj[i].url!=""){
                                picArr[i].src=myobj[i].url;
                                //保存信息
                                $(divArr[i]).children("div .panel-warning").attr('url',myobj[i].url);
                            }
                            //更改描述标签
                            if(myobj[i].desOptionalTags.length!=0){
                                labelArr[i].innerHTML=myobj[i].desOptionalTags.substring(1,myobj[i].desOptionalTags.length-1);
                                //保存信息
                                $(divArr[i]).children("div .panel-warning").attr('desOptionalTags',myobj[i].desOptionalTags.substring(1,myobj[i].desOptionalTags.length-1));
                            }else{
                                labelArr[i].innerHTML="无";
                                //保存信息
                                $(divArr[i]).children("div .panel-warning").attr('desOptionalTags', "无");
                            }

                            //保存需求标签
                            if(myobj[i].reqOptionalTags.length!=0){
                                //保存信息
                                $(divArr[i]).children("div .panel-warning").attr('reqOptionalTags',myobj[i].reqOptionalTags.substring(1,myobj[i].reqOptionalTags.length-1));
                            }else{
                                //保存信息
                                $(divArr[i]).children("div .panel-warning").attr('reqOptionalTags', "无");
                            }

                            //保存需求问题
                            if(myobj[i].req!=null&&myobj[i].req!=""){
                                $(divArr[i]).children("div .panel-warning").attr('req',myobj[i].req);
                            }
                            
                        }
                    }
                },
                //error:function(XMLHttpRequest, textStatus, errorThrown){
                //通常情况下textStatus和errorThrown只有其中一个包含信息
                error: function(XMLHttpRequest, textStatus, errorThrown) {
                    window.alert(textStatus);
                }
            });  
  
        }

    </script>
    
    <!-- Bootstrap Js -->
    <script src="assets/js/bootstrap.min.js"></script>
    <!-- Metis Menu Js -->
    <script src="assets/js/jquery.metisMenu.js"></script>
      <!-- Custom Js -->
    <script src="assets/js/custom-scripts.js"></script>
 
</body>
</html>
