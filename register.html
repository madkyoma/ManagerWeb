<!DOCTYPE html>
<!--[if lt IE 7 ]> <html lang="en" class="ie6 ielt8"> <![endif]-->
<!--[if IE 7 ]>    <html lang="en" class="ie7 ielt8"> <![endif]-->
<!--[if IE 8 ]>    <html lang="en" class="ie8"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--> 
<html lang="en"> 
<!--<![endif]-->
<head>
<meta charset="utf-8">
<title>管理者端-注册</title>
<link type="text/css" href="assets/css/login-style.css" rel="stylesheet" />
<script type="text/javascript" src="assets/js/jquery-1.10.2.js"></script>
</head>
<body>
<div class="container">
	<section id="content">
		<form method="post" action="">
			<h1>注册</h1>
			<div>
				<input type="text" placeholder="电子邮箱" required id="email" name="mailAddress" />
			</div>
      <div>
        <input type="text" placeholder="手机号" required id="phone" name="mailAddress" />
      </div>
      <div>
        <input type="text" placeholder="用户名" required id="name" name="mailAddress" />
      </div>
			<div>
				<input type="password" placeholder="密码" required id="password" name="password" />
			</div>

			<div>
				<input type="button" value="注册" />
			</div>
		</form><!-- form -->
        <div style="padding-bottom:5px;">
        	<p id="demo"></p>
        </div>
	</section><!-- content -->
</div><!-- container -->

<script>
  $(document).ready(function() {
	  $("input[type=button]").click(function() {
      login();
    })
  });
	function login(){
		  var username=document.getElementById("email").value;  
  		var phone=document.getElementById("phone").value;
      var name=document.getElementById("name").value;  
      var password=document.getElementById("password").value;
      if(username==""){
        window.alert("电子邮箱不能为空！");
        return;
      }
      if(phone==""){
        window.alert("手机号不能为空！");
        return;
      }
      if(name==""){
        window.alert("电子邮箱不能为空！");
        return;
      }
      if(password==""){
        window.alert("密码不能为空！");
        return;
      }
    	var params = "mailAddress="+username+"&phoneNumber="+phone+"&name="+name+"&password="+password;

      var url = "http://114.115.142.42/Operation/ManagerRegister"; 

                $.ajax({  
                  type: 'POST',  
                  url: url,  
                  dataType: 'text',  
                  data: params,  
                  beforeSend: function() {  
                    //document.getElementById("demo").innerHTML= 'checking...'  ;  
                    //window.alert('checking...');
                  },  
                  complete: function(XMLHttpRequest, textStatus) { 
                  },  
                  success: function(data) {  
                    if(data=="success"){  
                      window.alert("注册成功！");
                      window.location.href="login.html";
                    }else if(data=="已被注册"){
                      window.alert("该邮箱已被注册！");
                      document.getElementById("demo").innerHTML = "" ;
                    }else{
                      document.getElementById("demo").innerHTML = data ;
                    }
                  },
                  //error:function(XMLHttpRequest, textStatus, errorThrown){
                  //通常情况下textStatus和errorThrown只有其中一个包含信息
                  error: function(XMLHttpRequest, textStatus, errorThrown) {
                    window.alert(textStatus);
                  }
                });  
  }


</script>
</body>
</html>
